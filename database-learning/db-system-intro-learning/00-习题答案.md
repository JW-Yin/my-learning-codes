## 2025-1

- ACID 特性  
原子性：事务要么全执行，要么全不执行，无中间状态；  
一致性：事务执行前后数据库满足完整性约束，状态合法；  
隔离性：多事务并发执行互不干扰，避免并发异常；  
持久性：已提交事务的修改永久有效，不因故障丢失。  
- 作用  
并发控制：隔离性为核心，通过并发控制机制（锁 / 多版本）保证隔离性，避免脏读、不可重复读等并发异常，最终实现并发下的一致性；  
故障恢复：原子性通过undo log实现未提交事务的回滚，持久性通过redo log实现已提交事务的修改持久化，二者共同保障故障后数据库能恢复到一致的合法状态，一致性是故障恢复的最终目标。

## 2025-2

1.  $(AB)^+_F  = \{A,B,C,D,E\}$
1.  第二范式，满足任意列都为原子列（第一范式），且存在非主属性对主属性的部分依赖

## 2025-3

**注意：删除语句语不支持直接在FROM子句中连接多个表来删除（只能单表delete，然后子查询）**

1. select st.Sno, st.Sname 
from Student st, SC sc, Course co 
where 
sc.Sno=st.Sno and sc.Cno = co.Cno and 
sc.Grade > 80 and 
co.Cname = '数据库'

2. delete from SC 
where Grade < 60 and 
Sno in (select Sno from Student where Sdept = 'CS')

## 2025-4


## 2024-1

关系模型的参照完整性是指对一个表中外键的约束，要求外键的值必须是所关联的基本表的主键的值，或为 NULL。若外键关联的是本表，则外键的值需等于本表的主键值或为 NULL。

## 2024-2

1. 先写日志，后写数据库（这样做可以保证即便遇到突发故障，也可以利用日志来正确处理进行了一半的事务/已提交但未刷盘的事务）
2. 顺序记录（这样做可以保证进行数据库恢复/回滚时正确恢复到某一状态）
3. 持久化存储（日志一旦写入外存后，必须能保证即便再遇到故障，也不会丢失日志）
4. 完整性（日志必须完整的记录事务开始、事务操作、事务提交/回滚的完整记录，不能有遗漏、错误或损坏）
5. 可恢复性（必须要在故障发生后，可以依靠已经记录的日志来恢复数据库的状态）

## 2024-3

1. 挑选出所有的课程号，这个课程号必须满足不是张三这个学生选的（查出张三没有选的所有课程的课程号）
2. $\pi_{\text{CNO}}(C) - \pi_{\text{CNO}}\left(\sigma_{\text{S.SNO=SC.SNO} \land \text{SNAME='张三'}}(S \times SC)\right)$

## 2024-4

1. 画出E-R图

2. E-R模型转换为关系模型
**转换规则：1:n 联系合并到 n 方实体对应的关系表，m:n 联系单独建立关系表并包含双方实体主码 + 联系属性，实体自身基础属性保留**
3. 标出主码（下划线）、外键（斜体或波浪线）


## 2024-5


1.  **外模式**：用户可见的局部逻辑视图（对应视图）；
2.  **模式**：数据库全局逻辑结构（对应基本表）；
3.  **内模式**：数据底层物理存储结构（对应存储文件、索引）。

通过**两层映射**实现**数据独立性**：
1.  **外模式-模式映射**：保证**逻辑独立性**——全局逻辑结构改变，用户视图和应用程序不变；
2.  **内模式-模式映射**：保证**物理独立性**——底层存储结构改变，全局逻辑和用户视图不变。

- 模式、内模式：**各1个**；
- 外模式：**可多个**。

## 2024-6

1. 所有非平凡多值依赖：
    - 基础非平凡多值依赖（3 个）：课程→→讲师；课程→→参考书；课程→→教室
    - 合并推导的非平凡多值依赖（3 个）：课程→→（讲师，参考书）；课程→→（讲师，教室）；课程→→（参考书，教室）
    
2. 仅 课程→→教室 是由函数依赖（课程→教室）推导而来的多值依赖


**注意：**  
**函数依赖其实是多值依赖的特殊形式，如果是函数依赖，那也一定是多值依赖**  
**多值依赖的 “合并规则”：如果 A 能决定 B 的集合，也能决定 C 的集合，那么 A 可以决定 “B+C” 的集合**
