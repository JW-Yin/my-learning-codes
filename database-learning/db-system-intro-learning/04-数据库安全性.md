# 《数据库系统概论（第5版）》第四章 数据库安全性大纲

## 为什么要做安全（4.1）→ 核心安全控制手段（4.2-4.5）→ 补充安全保护（4.6）→ 体系总结（4.7）

## 第4章 数据库安全性

### 4.1 数据库安全性概述

#### 4.1.1 数据库的不安全因素
- **非授权用户对数据库的恶意存取和破坏**
  - 黑客、犯罪分子通过非法手段获取用户标识和密码
  - 假冒合法用户进行非法操作
- **重要敏感数据泄露**
  - 通过非法渠道获取机密数据
  - 通过推理方式获取未授权数据
- **安全环境的脆弱性**
  - 操作系统安全漏洞
  - 网络协议安全缺陷
  - 数据库管理系统安全机制不完善

#### 4.1.2 安全标准简介
- **TCSEC标准（可信计算机系统评估准则）**
  - 1985年美国国防部制定
  - 四个等级七个级别：D、C1、C2、B1、B2、B3、A1
  - 数据库安全主要借鉴C2和B1级别
- **CC标准（通用准则）**
  - 1999年国际标准化组织采纳为国际标准
  - 评估保证级别（EAL）：EAL1~EAL7
  - 我国相应的国家标准：GB/T 18336

### 4.2 数据库安全性控制

#### 4.2.1 用户身份鉴别
- **静态口令鉴别**
  - 用户预设口令，登录时输入验证
  - 简单易行，但容易被破解
- **动态口令鉴别**
  - 口令动态变化，如短信验证码、动态令牌
  - 一次一密，安全性较高
- **生物特征鉴别**
  - 指纹、虹膜、人脸识别等
  - 唯一性高，难以伪造
- **智能卡鉴别**
  - IC卡存储用户身份信息
  - 需结合PIN码使用

#### 4.2.2 存取控制
- **自主存取控制（DAC）**
  - 用户对不同数据对象有不同的存取权限
  - 权限可以转让给其他用户
- **强制存取控制（MAC）**
  - 每个数据对象被标以一定的密级
  - 每个用户也被授予某个级别的许可证
  - 只有许可证级别≥密级时才能存取

#### 4.2.3 自主存取控制方法
- **权限类型**
  - 数据对象：关系、视图、属性列
  - 操作类型：SELECT、INSERT、UPDATE、DELETE、REFERENCES等
- **权限授予与回收**
  - GRANT语句授予权限
  - REVOKE语句回收权限

#### 4.2.4 授权：授予与收回
- **GRANT语句**
  - 格式：GRANT <权限> ON <对象类型> <对象名> TO <用户> [WITH GRANT OPTION]
  - WITH GRANT OPTION：允许被授权者传播权限
- **REVOKE语句**
  - 格式：REVOKE <权限> ON <对象类型> <对象名> FROM <用户> [CASCADE|RESTRICT]
  - CASCADE：级联回收权限
  - RESTRICT：受限回收（默认）
- **创建数据库模式的权限**
  - DBA在创建用户时授予CREATE USER权限
  - 不同数据库系统实现不同

#### 4.2.5 数据库角色
- **角色的概念**
  - 一组相关权限的命名集合
  - 简化权限管理
- **角色的创建与授权**
  - CREATE ROLE <角色名>
  - GRANT <权限> ON <对象> TO <角色>
- **角色的使用**
  - GRANT <角色> TO <用户> [WITH ADMIN OPTION]
  - 用户可以激活角色获得相应权限
- **角色的优点**
  - 减少授权工作量
  - 动态管理权限
  - 灵活的安全性管理

#### 4.2.6 强制存取控制方法
- **主体与客体**
  - 主体：系统中的活动实体（用户、进程）
  - 客体：系统中的被动实体（文件、基本表、视图等）
- **敏感度标记**
  - 绝密（Top Secret）、机密（Secret）、可信（Confidential）、公开（Public）
  - 主体的敏感度标记称为许可证级别
  - 客体的敏感度标记称为密级
- **存取规则**
  - 仅当主体的许可证级别≥客体的密级时，主体才能读取相应客体
  - 仅当主体的许可证级别≤客体的密级时，主体才能写相应客体
- **DAC与MAC结合**
  - 先进行DAC检查，通过后再进行MAC检查
  - 更高级别的安全性保障

### 4.3 视图机制
- **视图的安全保护作用**
  - 通过视图隐藏敏感数据
  - 将视图权限授予用户，而不授予基本表权限
- **视图定义与授权**
  - CREATE VIEW语句定义视图
  - GRANT语句授予视图权限
- **视图机制的优点**
  - 提供逻辑数据独立性
  - 简化用户权限管理

### 4.4 审计
- **审计的概念**
  - 记录用户对数据库的所有操作
  - 存储在审计日志中
  - 用于安全检查、非法操作追踪
- **审计事件**
  - 服务器事件：数据库服务器启动、停止、配置加载
  - 系统权限：对系统拥有结构或数据对象的操作
  - 语句事件：SQL语句执行
  - 模式对象事件：特定模式对象的操作
- **审计功能**
  - 基本功能：记录审计事件
  - 高级功能：提供多套审计规则、审计分析和报表功能
- **AUDIT语句**
  - 设置审计功能：AUDIT <审计选项> ON <审计对象>
  - 取消审计功能：NOAUDIT <审计选项> ON <审计对象>
- **审计日志分析**
  - 通过查看审计日志发现非法存取
  - 加强数据库安全性

### 4.5 数据加密
- **数据加密的必要性**
  - 防止敏感数据在传输或存储过程中被窃取
- **加密方法**
  - 存储加密
    - 透明存储加密：内核级加密，对用户透明
    - 非透明存储加密：通过多个加密函数实现
  - 传输加密
    - 链路加密：在链路层加密，包括路由信息
    - 端到端加密：在发送端加密，接收端解密
- **加密算法**
  - 对称密钥加密：加密密钥=解密密钥，如DES、AES
  - 非对称密钥加密：公开密钥加密，私钥解密，如RSA
- **数据库加密的优缺点**
  - 优点：增强数据存储和传输的安全性
  - 缺点：加密/解密开销大，密钥管理复杂

### 4.6 其他安全性保护
- **推理控制**
  - 防止用户通过多次查询结果推断出敏感信息
  - 处理敏感数据的相关性
- **隐蔽信道**
  - 处理数据共享时可能产生的隐蔽信息传输
- **数据隐私保护**
  - 保护个人身份、位置等隐私信息
  - 数据脱敏、数据匿名化技术

### 4.7 小结
- **数据库安全性的重要性**
  - 保护数据库免受恶意破坏和非法存取
- **数据库安全性控制技术**
  - 用户身份鉴别
  - 存取控制：自主存取控制、强制存取控制
  - 视图机制
  - 审计
  - 数据加密
- **多层次安全防护体系**
  - 物理层、网络层、操作系统层、数据库系统层、应用层
  - 多种技术综合运用，构建完整的安全防护体系

---